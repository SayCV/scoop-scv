{
    "##": "miniconda3-mirror-cn",
    "version": "0.20231122",
    "description": "China mirror for miniconda3, A cross-platform, Python-agnostic binary package manager",
    "homepage": "https://conda.io/miniconda.html",
    "license": "BSD-3-Clause",
    "notes": "China mirror for miniconda3",
    "depends": ["sudo", "miniconda3"],
    "url": "https://github.com/excitoon/empty/releases/download/empty-1.0.7/empty-1.0.7.zip",
    "hash": "8739c76e681f900923b900c9df0ef75cf421d39cabb54650c4b9ad19b6a76d85",
    "post_install": [
        "$current_dir = if (get_config NO_JUNCTIONS) { $dir } else { \"$(appdir $app $global)\\current\" }",
        "$unix_current_dir = \"$current_dir\".Replace('\\', '/')",
        "",
        "info '[China mirror]: Creating profile/.condarc ...'",
        "$ofile = \"$dir\\profile\\.condarc\"",
        "$cont = @(",
        "    \"ssl_verify: false\"",
        "    \"channels:\"",
        "    \"  - defaults\"",
        "    \"show_channel_urls: true\"",
        "    \"default_channels:\"",
        "    \"  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main\"",
        "    \"  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r\"",
        "    \"  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2\"",
        "    \"custom_channels:\"",
        "    \"  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\"",
        "    \"  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\"",
        "    \"  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\"",
        "    \"  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\"",
        "    \"  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\"",
        "    \"  pytorch-lts: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\"",
        "    \"  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\"",
        ")",
        "Set-Content \"$ofile\" ($cont -join \"`r`n\") -Encoding ASCII",
        "",
        "info '[Portable Mode]: Linking ~/.condarc ...'",
        "ensure \"$env:HOME\" | Out-Null",
        "$file = \"$env:HOME\\.condarc\"",
        "if (Test-Path $file) {",
        "    Remove-Item \"$file\" -Force | Out-Null",
        "}",
        "$link = sudo New-Item -ItemType SymbolicLink -Path \"$file\" -Value \"$dir\\profile\\.condarc\"",
        "$link | Select-Object FullName, LinkType, Target",
        "",
        "info '[Portable Mode]: Linking ~/.condarc ...'",
        "ensure \"$env:USERPROFILE\" | Out-Null",
        "$file = \"$env:USERPROFILE\\.condarc\"",
        "if (Test-Path $file) {",
        "    Remove-Item \"$file\" -Force | Out-Null",
        "}",
        "$link = sudo New-Item -ItemType SymbolicLink -Path \"$file\" -Value \"$dir\\profile\\.condarc\"",
        "$link | Select-Object FullName, LinkType, Target",
        "",
        "info 'Done.'"
    ],
    "persist": "profile"
}
